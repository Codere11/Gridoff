<div class="game-container">
  <!-- Game Map -->
<div class="map">
  <div *ngFor="let y of [].constructor(visibleTilesY); let rowIndex = index">
    <div *ngFor="let x of [].constructor(visibleTilesX); let colIndex = index"
         class="tile"
         [ngStyle]="getTileStyle(cameraX + colIndex, cameraY + rowIndex)">
    </div>
  </div>
</div>


  
  

  <!-- Player -->
  <div class="player" [ngStyle]="getPlayerStyle()"></div>

  <!-- HUD (Health, Money) -->
<div *ngIf="gameState.showHUD" class="stats">
  <p> Health: {{ gameState.player.health }} |</p>
  <p> | Money: {{ gameState.player.money }}</p>
</div>

<div class="inventory" [class.inventory-open]="inventoryOpen">
  <div *ngFor="let slot of inventoryService.inventorySlots; let i = index; trackBy: trackBySlot"
       class="inventory-slot"
       (mousedown)="onMouseDown($event, i)"
       [attr.data-index]="i">
    <img *ngIf="slot.item" class="inventory-icon" [src]="slot.item.icon" [alt]="slot.item.name">
    <span *ngIf="slot.quantity > 1" class="stack-quantity">{{ slot.quantity }}</span>
  </div>

  <!-- Ghost element that follows the mouse while dragging -->
  <div *ngIf="draggingSlot !== null" class="drag-ghost" [ngStyle]="dragGhostStyle">
    <img *ngIf="inventoryService.inventorySlots[draggingSlot].item" class="inventory-icon"
         [src]="inventoryService.inventorySlots[draggingSlot].item?.icon"
         [alt]="inventoryService.inventorySlots[draggingSlot].item?.name">
    <span *ngIf="inventoryService.inventorySlots[draggingSlot].quantity > 1" class="stack-quantity">
      {{ inventoryService.inventorySlots[draggingSlot].quantity }}
    </span>
  </div>
</div>






  
<!-- Enemies -->
<div *ngFor="let enemy of combatService.enemies" 
     class="enemy"
     [ngStyle]="getEnemyStyle(enemy)">
  <p class="health-bar">❤️ {{ enemy.health }}</p>
</div>


<!-- Bullets -->
<div *ngFor="let bullet of combatService.bullets" 
     class="bullet"
     [ngStyle]="getBulletStyle(bullet)">
</div>



</div>